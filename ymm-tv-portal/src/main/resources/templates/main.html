<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        a:hover {
            color: #238b68;
        }
    </style>
</head>
<body style="overflow-x: hidden">
<div id="app">
    <!--第一导航-->
    <div class="container-fluid" style="background-color: #fff9ec ;opacity:0.9;background-image: url('img/yemei3.png');
background-size:100% ">
        <div class="row">
            <div class="col-md-3">
                <ul class="nav nav-pills">
                    <li><a href="" class="glyphicon glyphicon-film lead">首页</a></li>
                    <li style="padding-left: 50px"><a href="" class="lead"><p class="text-success">新产品
                        &trianglerighteq;</p>
                    </a></li>
                </ul>
            </div>
            <div class="col-md-3 col-md-offset-4"></div>
            <ul class="nav nav-pills">
                <li class="dropdown" th:if="${session.userinfo} != null"><a href="" class="dropdown-toggle" data-toggle="dropdown">
                    <img th:src="@{${session.userinfo.getHeadImg()}}"
                                                                                                    class="img-responsive img-circle"
                                                                                                    height="40px"
                                                                                                    width="40px"/></a>
                    <ul class="dropdown-menu">
                        <li class="text-center"><span class="text-primary ">[[${session.userinfo.getLoginAccount()}]]</span></li>
                        <li class="divider"></li>
                        <li><a href=""><span class="glyphicon glyphicon-home">个人中心</span></a></li>
                        <li><a href=""><span class="glyphicon glyphicon-arrow-left">退出登录</span></a></li>
                    </ul>

                </li>
                <li style="padding-right: 50px" th:if="${session.userinfo} == null"><a href="" class="lead"><span class="glyphicon glyphicon-user"></span>登陆</a>
                </li>
                <li><a href="" class="lead text-danger"><span class="glyphicon glyphicon-circle-arrow-right lead"></span>注册</a>
                </li>
            </ul>
        </div>
        <div style="height: 100px" class="row">
            <div class="col-md-3">
                <h1 class="lead text-success text-left" style="font-size:50px ;opacity:0.5">
                    <strong><em>MMMM个人站</em></strong></h1>
            </div>
            <div class="col-md-3 col-xs-12 col-md-offset-5" style="margin-top: 50px">
                <div class="input-group" style="opacity:0.8">
                    <input type="text" class="form-control font-size:50px " placeholder="Search for..." v-model="key">
                    <span class="input-group-btn">
        <button class="btn btn-default" type="button" @click="queyItem(key)"><img src="" alt=""
                                                           class="glyphicon glyphicon-zoom-in">Go!</button>
      </span>
                </div>
            </div>
        </div>
    </div>
    <!--第二导航-->
    <nav class="navbar navbar-default " role="navigation">
        <div class="container-fluid">
            <div class="row">
                <div class="navbar-header" style="padding-left: 80px">
                    <a class="navbar-brand" href="#"><p class="lead">个人站</p></a>
                </div>
                <div class="col-md-8 col-md-offset-2" style="padding-left: 50px">
                    <ul class="nav navbar-nav ">
                        <li><a href="#"><img src="img/icon/a8.ico" style="height: 30px;width: 30px"
                                             alt="">动漫</a></li>
                        <li><a href="#"><img src="img/icon/a1.ico" style="height: 30px;width: 30px" alt="">TV剧</a>
                        </li>
                        <li><a href="#"><img src="img/icon/a2.ico" style="height: 30px;width: 30px" alt="">影视</a>
                        </li>
                        <li><a href="#"><img src="img/icon/a3.ico" style="height: 30px;width: 30px" alt="">综艺</a>
                        </li>
                        <li><a href="#"><img src="img/icon/a4.ico" style="height: 30px;width: 30px" alt="">新闻</a>
                        </li>
                        <li><a href="#"><img src="img/icon/a5.ico" style="height: 30px;width: 30px" alt="">绝对</a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="img/icon/a6.ico" style="height: 30px;width: 30px" alt="">榜单
                                <span class="badge">3</span><span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="">动漫榜单</a></li>
                                <li><a href="">影视榜单</a></li>
                                <li><a href="">TV榜单</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="img/icon/a7.ico" style="height: 30px;width: 30px" alt="">更多
                                <span class="badge">3</span><b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">鬼畜</a></li>
                                <li class="divider"></li>
                                <li><a href="#">生活</a></li>
                                <li><a href="#">体育</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!--展示栏-->

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-5" style="margin-top: 40px">
                <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li v-for="(car, index) in carousel" data-target="#carousel-example-generic"
                            :data-slide-to="index"
                            :class="{'active':index==0}"></li>
                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        <div v-for="(car, index) in carousel" :class="{'item active':index==0, 'item':index!=0}">
                            <a href="">
                                <img :src="car.path" class="img-rounded" alt="...">
                                <div class="carousel-caption">
                                    {{car.title}}
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Controls -->
                    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-md-7">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-4" v-for="(item, index) in portalShow">
                            <a href="#" class="thumbnail">
                            <img :src="item.wpath" alt="" class="img-rounded"
                                 data-toggle="tooltip" data-placement="right" :title="item.title"
                                 style="height: 180px;width: 100%">
                        </a>
                            <p class="help-block">{{item.detail}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--今日热播-->
    <div class="container-fluid" style="margin-top: -30px">
        <h2 class="page-header" style="padding-left: 50px"><img src="img/icon2/b1.ico"
                                                                style="height: 50px;width: 50px"/>今日热播</h2>
        <div class="row">
            <div :class="{'col-md-2 col-md-offset-1':index==0, 'col-md-2':index!=0}" v-for="(item, index) in hotShow">
                <div class="panel panel-success">
                    <div class="panel-heading"><h3 class="panel-title">{{item.title}}</h3></div>
                    <div class="panel-body">
                        <a href="" class="thumbnail"><img :src="item.path" style="height: 340px"></a>
                        更新至{{item.update}}集 &nbsp;
                        <small>(共{{item.chapter}}集)</small>
                        <button type="button" class="btn btn-success" style="float: right"><span
                                class="glyphicon glyphicon-play"></span>播放
                        </button>
                        <p class="text-danger text-left" >
                            <span class="glyphicon glyphicon-fire">今日播放{{item.playNum}}次</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--更新时间表-->
    <div class="container-fluid" style="margin-top: -30px">
        <h2 class="page-header" style="padding-left: 50px"><img src="img/icon2/b2.ico"
                                                                style="height: 50px;width: 50px"/>新番时间表
            <small>每天都在更新哦~</small>
        </h2>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <ul id="myTab" class="nav nav-tabs" style="padding-right: 20px">
                    <li class="active">
                        <a href="#z1" data-toggle="tab" class="text-success">
                            周一
                        </a>
                    </li>
                    <li style="padding-left: 30px"><a href="#z2" data-toggle="tab" class="text-success">周二</a></li>
                    <li style="padding-left: 30px"><a href="#z3" data-toggle="tab" class="text-success">周三</a></li>
                    <li style="padding-left: 30px"><a href="#z4" data-toggle="tab" class="text-success">周四</a></li>
                    <li style="padding-left: 30px"><a href="#z5" data-toggle="tab" class="text-success">周五</a></li>
                    <li style="padding-left: 30px"><a href="#z6" data-toggle="tab" class="text-success">周六</a></li>
                    <li style="padding-left: 30px"><a href="#z7" data-toggle="tab" class="text-success">周日</a></li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade in active" id="z1">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 1">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="z2">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 2">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="z3">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 3">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="z4">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 4">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="z5">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 5">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="z6">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 6">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="z7">
                        <div class="col-md-3" v-for="(item, index) in updateShow" v-if="item.updateTime == 7">
                            <p class="help-block">{{item.title}}</p>
                            <a href=""><img :src="item.thpath" alt="" class="img-rounded"
                                            data-toggle="tooltip" data-placement="left" :title="item.title"
                                            style="height: 120px;width: 140px">
                            </a>
                            <p>更新至{{item.update}}集</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4" style="margin-top: -41px">
                <h4 class="page-header">番剧排行榜
                    <button class="btn btn-primary " type="button" style="margin-left: 290px">More &telrec;</button>
                </h4>
                <ul class="list-group">
                    <li class="list-group-item" style="border: none" v-for="(item, index) in rankShow"><strong>{{index+1}}</strong>&nbsp;&nbsp;&nbsp;<a href=""
                                                                                                            class="text-muted">
                       {{item.name}}</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--新番推荐-->
    <div class="container-fluid" style="margin-top: -30px">
        <h2 class="page-header" style="padding-left: 50px"><img src="img/icon2/b3.ico"
                                                                    style="height: 50px;width: 50px"/>番剧推荐</h2>
        <div class="row col-md-10 col-md-offset-1" id="effect-5">

            <div class="col-md-2 " style="margin-top: 10px" v-for="(item, index) in animeShow">
                <div class="img">
                    <img :src="item.path" style="height: 330px; width: 100%">
                    <div class="overlay">
                        <a href="#" class="expand">&triangleright;</a>
                    </div>
                </div>
                <p class="glyphicon glyphicon-star text-danger" style="float: left">{{item.collect}}</p>
                <p class="text-right">更新至<strong>{{item.update}}</strong>集</p>
                <p style="float: left;" class="text-muted">共{{item.chapter}}集</p>
                <p class="text-right text-primary">{{item.title}}</p>
            </div>
        </div>
    </div>
    <!--页脚-->
    <footer>
        <div class="container-fluid bg-info" style="margin-top: 10px">
            <div class="row">
                <div class="col-md-4 col-md-offset-1">
                    <h3 class="lead text-left">Desiged By
                        <small>&nbsp;&nbsp;&nbsp;YMM</small>
                    </h3>
                </div>
                <div class="col-md-3 col-md-offset-4">
                    <h3 class="text-left text-muted"><strong>将小站分享给你的朋友 :</strong>
                        <a href=""><img src="img/icon/PY.jpg" height="50" width="50"/></a>
                        <a href=""><img src="img/icon/QQZ.jpg" height="50" width="50"/></a></h3>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-md-offset-1">
                    <h4 class="text-left text-muted">联系我们：<kbd>964106443@qq.com</kbd></h4>
                </div>
                <div class="col-md-3 col-md-offset-4">
                    <strong>本网站提供新影视资源均系收集各大网站，本网站只提供web页面浏览服务，并不提供影片资源存储，也不参与任何视频录制、上传</strong>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <h4 class="text-center text-warning bg-primary">Copyright © 2016-2019 MMM.Tv. All Rights Reserved
                        .</h4>
                </div>
            </div>
        </div>
    </footer>
</div>
<script src="jquery/jquery-2.1.1.min.js"></script>
<script src="js/modernizr.js"></script>
<script src="js/layer/layer.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script src="/js/vue.js"></script>
<script>
    new Vue({
        el: "#app",
        data: {
            carousel: [],
            portalShow: [],
            hotShow:[],
            updateShow:[],
            rankShow:[],
            animeShow:[],
            key:''
        },
        created: function () {
            var ym = this
            $.ajax({
                type: "get",
                url: "/main/carousel",
                beforeSend: function () {
                    index = layer.load(0, {shade: false});
                },
                success: function (object) {
                    layer.close(index)
                    ym.carousel = object;
                }
            }),
            $.ajax({
                    type: "get",
                    url: "/main/portalShow",
                    beforeSend: function () {
                        index = layer.load(0, {shade: false});
                    },
                    success: function (object) {
                        layer.close(index)
                        ym.portalShow = object;
                    }
                }),
            $.ajax({
                type: "get",
                url: "/main/hotShow",
                beforeSend: function () {
                    index = layer.load(0, {shade: false});
                },
                success: function (object) {
                    layer.close(index)
                    ym.hotShow = object;
                },
            });
            $.ajax({
                type: "get",
                url: "/main/updateShow",
                beforeSend: function () {
                    index = layer.load(0, {shade: false});
                },
                success: function (object) {
                    layer.close(index)
                    ym.updateShow = object;
                },
            });
            $.ajax({
                type: "get",
                url: "/main/rankShow",
                beforeSend: function () {
                    index = layer.load(0, {shade: false});
                },
                success: function (object) {
                    layer.close(index)
                    ym.rankShow = object;
                },
            });
            $.ajax({
                type: "get",
                url: "/main/animeShow",
                beforeSend: function () {
                    index = layer.load(0, {shade: false});
                },
                success: function (object) {
                    layer.close(index)
                    ym.animeShow = object;
                },
            });
        },
        methods:{
            queyItem(key){
                window.location.href="/search/detail?key="+key;
            },
            pageTo(e) {
                var ym = this
                if (e > ym.totalPage) {
                    layer.msg("请输入正确的页数！")
                    return
                }
                $.ajax({
                    type: "post",
                    url: "/search/detail",
                    data: {
                        pageNum: e,
                        key:ym.key,
                    },
                    beforeSend: function () {
                        index = layer.load(0, {shade: false});
                    },
                    success: function (object) {
                        layer.close(index)
                        ym.anime = object.item;
                        ym.total = object.total;
                        ym.pageNum = object.pageNum;
                        ym.totalPage = object.totalPage;
                    },
                    error: function () {
                        layer.close(index)
                        layer.msg("跳转失败！", {icon: 2})
                    }
                })
            },
        },
        updated:function () {
            if (Modernizr.touch) {
                // show the close overlay button
                $(".close-overlay").removeClass("hidden");
                // handle the adding of hover class when clicked
                $(".img").click(function (e) {
                    if (!$(this).hasClass("hover")) {
                        $(this).addClass("hover");
                    }
                });
                // handle the closing of the overlay
                $(".close-overlay").click(function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if ($(this).closest(".img").hasClass("hover")) {
                        $(this).closest(".img").removeClass("hover");
                    }
                });
            } else {
                // handle the mouseenter functionality
                $(".img").mouseenter(function () {
                    $(this).addClass("hover");
                })
                // handle the mouseleave functionality
                    .mouseleave(function () {
                        $(this).removeClass("hover");
                    });
            }
            $('[data-toggle="tooltip"]').tooltip()
        }
    })
</script>
</body>

</html>